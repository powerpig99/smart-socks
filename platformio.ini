; PlatformIO Project Configuration File
; Smart Socks - ELEC-E7840 Smart Wearables (Aalto University)
; Dual ESP32 Configuration (6 sensors total: 3 per leg)

[platformio]
default_envs = left_leg, right_leg, calibration

; ==========================================
; COMMON SETTINGS (shared by all environments)
; ==========================================
[common]
platform = espressif32
board = seeed_xiao_esp32s3
framework = arduino
upload_speed = 921600
monitor_speed = 115200
build_flags = 
    -D ARDUINO_USB_MODE=1
    -D ARDUINO_USB_CDC_ON_BOOT=1
monitor_filters = default, time
lib_deps = 
    bblanchon/ArduinoJson@^6.21.0

; ==========================================
; LEFT LEG ENVIRONMENT
; Configure for left leg (2 pressure + 1 stretch)
; Sensors: L_P_Heel (A0), L_P_Ball (A1), L_S_Knee (A2)
; WiFi IP: 192.168.4.1
; ==========================================
[env:left_leg]
platform = ${common.platform}
board = ${common.board}
framework = ${common.framework}
upload_speed = ${common.upload_speed}
monitor_speed = ${common.monitor_speed}
build_flags = 
    ${common.build_flags}
    -D LEG_ID_LEFT=1
monitor_filters = ${common.monitor_filters}
lib_deps = ${common.lib_deps}
build_src_filter = 
    +<../04_Code/arduino/data_collection_leg/*>
    -<src/*>

; ==========================================
; RIGHT LEG ENVIRONMENT  
; Configure for right leg (2 pressure + 1 stretch)
; Sensors: R_P_Heel (A0), R_P_Ball (A1), R_S_Knee (A2)
; WiFi IP: 192.168.4.2
; ==========================================
[env:right_leg]
platform = ${common.platform}
board = ${common.board}
framework = ${common.framework}
upload_speed = ${common.upload_speed}
monitor_speed = ${common.monitor_speed}
build_flags = 
    ${common.build_flags}
    -D LEG_ID_RIGHT=1
monitor_filters = ${common.monitor_filters}
lib_deps = ${common.lib_deps}
build_src_filter = 
    +<../04_Code/arduino/data_collection_leg/*>
    -<src/*>

; ==========================================
; CALIBRATION ENVIRONMENT (all 6 sensors on one ESP32)
; Use for initial sensor testing and calibration
; Sensors: A0-A5 (L_P_Heel, L_P_Ball, L_S_Knee, R_P_Heel, R_P_Ball, R_S_Knee)
; ==========================================
[env:calibration]
platform = ${common.platform}
board = ${common.board}
framework = ${common.framework}
upload_speed = ${common.upload_speed}
monitor_speed = ${common.monitor_speed}
build_flags = ${common.build_flags}
monitor_filters = ${common.monitor_filters}
lib_deps = ${common.lib_deps}
build_src_filter = 
    +<../04_Code/arduino/calibration_all_sensors/*>
    -<src/*>

; Legacy environment removed. Use left_leg, right_leg, or calibration environments.
; Old 10-sensor code is preserved in 04_Code/arduino/deprecated_10_sensor/ for reference.
